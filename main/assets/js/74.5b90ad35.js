(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{638:function(e,o,t){"use strict";t.r(o);var n=t(1),a=Object(n.a)({},(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"transaction-encoding"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#transaction-encoding"}},[e._v("#")]),e._v(" Transaction Encoding")]),e._v(" "),t("p",[e._v("When orchestrating an interchain account transaction, which comprises multiple "),t("code",[e._v("sdk.Msg")]),e._v(" objects represented as "),t("code",[e._v("Any")]),e._v(" types, the transactions must be encoded as bytes within "),t("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/v7.2.0/proto/ibc/applications/interchain_accounts/v1/packet.proto#L21-L26",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("InterchainAccountPacketData")]),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"Ly8gSW50ZXJjaGFpbkFjY291bnRQYWNrZXREYXRhIGlzIGNvbXByaXNlZCBvZiBhIHJhdyB0cmFuc2FjdGlvbiwgdHlwZSBvZiB0cmFuc2FjdGlvbiBhbmQgb3B0aW9uYWwgbWVtbyBmaWVsZC4KbWVzc2FnZSBJbnRlcmNoYWluQWNjb3VudFBhY2tldERhdGEgewogIFR5cGUgICB0eXBlID0gMTsKICBieXRlcyAgZGF0YSA9IDI7CiAgc3RyaW5nIG1lbW8gPSAzOwp9Cg=="}}),e._v(" "),t("p",[e._v("The "),t("code",[e._v("data")]),e._v(" field must be encoded as a "),t("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/v7.2.0/proto/ibc/applications/interchain_accounts/v1/packet.proto#L28-L31",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("CosmosTx")]),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"Ly8gQ29zbW9zVHggY29udGFpbnMgYSBsaXN0IG9mIHNkay5Nc2cncy4gSXQgc2hvdWxkIGJlIHVzZWQgd2hlbiBzZW5kaW5nIHRyYW5zYWN0aW9ucyB0byBhbiBTREsgaG9zdCBjaGFpbi4KbWVzc2FnZSBDb3Ntb3NUeCB7CiAgcmVwZWF0ZWQgZ29vZ2xlLnByb3RvYnVmLkFueSBtZXNzYWdlcyA9IDE7Cn0K"}}),e._v(" "),t("p",[e._v("The encoding method for "),t("code",[e._v("CosmosTx")]),e._v(" is determined during the channel handshake process. If the channel version "),t("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/v7.2.0/proto/ibc/applications/interchain_accounts/v1/metadata.proto#L22",target:"_blank",rel:"noopener noreferrer"}},[e._v("metadata's "),t("code",[e._v("encoding")]),e._v(" field"),t("OutboundLink")],1),e._v(" is marked as "),t("code",[e._v("proto3")]),e._v(", then "),t("code",[e._v("CosmosTx")]),e._v(" undergoes protobuf encoding. Conversely, if the field is set to "),t("code",[e._v("proto3json")]),e._v(", then "),t("a",{attrs:{href:"https://protobuf.dev/programming-guides/proto3/#json",target:"_blank",rel:"noopener noreferrer"}},[e._v("proto3 json"),t("OutboundLink")],1),e._v(" encoding takes place, which generates a JSON representation of the protobuf message.")]),e._v(" "),t("h2",{attrs:{id:"protobuf-encoding"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#protobuf-encoding"}},[e._v("#")]),e._v(" Protobuf Encoding")]),e._v(" "),t("p",[e._v("Protobuf encoding serves as the standard encoding process for "),t("code",[e._v("CosmosTx")]),e._v(". This occurs if the channel handshake initiates with an empty channel version metadata or if the "),t("code",[e._v("encoding")]),e._v(" field explicitly denotes "),t("code",[e._v("proto3")]),e._v(". In Golang, the protobuf encoding procedure utilizes the "),t("code",[e._v("proto.Marshal")]),e._v(" function. Every protobuf autogenerated Golang type comes equipped with a "),t("code",[e._v("Marshal")]),e._v(" method that can be employed to encode the message.")]),e._v(" "),t("h2",{attrs:{id:"protobuf-json-encoding"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#protobuf-json-encoding"}},[e._v("#")]),e._v(" (Protobuf) JSON Encoding")]),e._v(" "),t("p",[e._v("The proto3 JSON encoding presents an alternative encoding technique for "),t("code",[e._v("CosmosTx")]),e._v(". It is selected if the channel handshake begins with the channel version metadata "),t("code",[e._v("encoding")]),e._v(" field labeled as "),t("code",[e._v("proto3json")]),e._v(". In Golang, the Proto3 canonical encoding in JSON is implemented by the "),t("code",[e._v('"github.com/cosmos/gogoproto/jsonpb"')]),e._v(" package. Within Cosmos SDK, the "),t("code",[e._v("ProtoCodec")]),e._v(" structure implements the "),t("code",[e._v("JSONCodec")]),e._v(" interface, leveraging the "),t("code",[e._v("jsonpb")]),e._v(" package. This method generates a JSON format as follows:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogICZxdW90O21lc3NhZ2VzJnF1b3Q7OiBbCiAgICB7CiAgICAgICZxdW90O0B0eXBlJnF1b3Q7OiAmcXVvdDsvY29zbW9zLmJhbmsudjFiZXRhMS5Nc2dTZW5kJnF1b3Q7LAogICAgICAmcXVvdDtmcm9tX2FkZHJlc3MmcXVvdDs6ICZxdW90O2Nvc21vczEuLi4mcXVvdDssCiAgICAgICZxdW90O3RvX2FkZHJlc3MmcXVvdDs6ICZxdW90O2Nvc21vczEuLi4mcXVvdDssCiAgICAgICZxdW90O2Ftb3VudCZxdW90OzogWwogICAgICAgIHsKICAgICAgICAgICZxdW90O2Rlbm9tJnF1b3Q7OiAmcXVvdDt1YXRvbSZxdW90OywKICAgICAgICAgICZxdW90O2Ftb3VudCZxdW90OzogJnF1b3Q7MTAwMDAwMCZxdW90OwogICAgICAgIH0KICAgICAgXQogICAgfQogIF0KfQo="}}),e._v(" "),t("p",[e._v("Here, the "),t("code",[e._v('"messages"')]),e._v(" array is populated with transactions. Each transaction is represented as a JSON object with the "),t("code",[e._v("@type")]),e._v(" field denoting the transaction type and the remaining fields representing the transaction's attributes.")])],1)}),[],!1,null,null,null);o.default=a.exports}}]);